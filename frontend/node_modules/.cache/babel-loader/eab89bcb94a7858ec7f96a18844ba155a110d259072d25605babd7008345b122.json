{"ast":null,"code":"var _jsxFileName = \"E:\\\\Downloads\\\\frontend\\\\src\\\\components\\\\UserHome\\\\PlaceOrder.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate, useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PlaceOrder({\n  cartItems\n}) {\n  _s();\n  const [isPlacingOrder, setIsPlacingOrder] = useState(false);\n  const navigate = useNavigate();\n  const history = useNavigate();\n  const cartIds = cartItems.map(cart => cart.cartId);\n  // let nocart;\n  // if(cartItems.length===0)\n  const [orderId, setOrderId] = useState();\n  useEffect(() => {\n    const stopBack = () => {\n      window.history.pushState(null, null, window.location.href);\n      window.onpopstate = function (event) {\n        window.history.go(1);\n      };\n    };\n    stopBack();\n  }, []);\n  const handleCancelOrder = async () => {\n    const res = await axios.get(`http://localhost:8080/pizza/app/home/cancel-order/${orderId}`);\n    console.log(res);\n    // alert('vcd removed from cart')\n    navigate('/userHome/cart');\n\n    // /home/cancel-order/{orderId}\n  };\n\n  const handlePlaceOrder = () => {\n    setIsPlacingOrder(true);\n    axios.post(`http://localhost:8080/pizza/app/home/place-order`, {\n      cartIds\n    }).then(response => {\n      setOrderId(response.data);\n      console.log('Order placed successfully!', response.data);\n      setIsPlacingOrder(true);\n      navigate(`/userHome/payment/${response.data}`);\n    }).catch(error => {\n      if (error == \"AxiosError: Network Error\") navigate('/serverError');else {\n        console.error('Error placing the order:', error);\n        setIsPlacingOrder(false);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Place Your Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"PIZZA Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: cartItems.map(cart => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: cart.pizza.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: cart.pizza.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: cart.pizza.cost\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)]\n        }, cart.cartId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePlaceOrder,\n      disabled: isPlacingOrder,\n      style: {\n        color: \"#8a1253\",\n        borderColor: \"#8a1253\"\n      },\n      className: \"btn btn-light\",\n      children: isPlacingOrder ? 'Placing order..' : 'Confirm Order'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: {\n        color: \"#8a1253\",\n        borderColor: \"#8a1253\"\n      },\n      onClick: handleCancelOrder,\n      className: \"btn btn-light\",\n      children: \"Cancel Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(PlaceOrder, \"0CV0XlkvIPaPmSqDwuEogULOxJo=\", false, function () {\n  return [useNavigate, useNavigate];\n});\n_c = PlaceOrder;\nexport default PlaceOrder;\nvar _c;\n$RefreshReg$(_c, \"PlaceOrder\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useHistory","jsxDEV","_jsxDEV","PlaceOrder","cartItems","_s","isPlacingOrder","setIsPlacingOrder","navigate","history","cartIds","map","cart","cartId","orderId","setOrderId","stopBack","window","pushState","location","href","onpopstate","event","go","handleCancelOrder","res","get","console","log","handlePlaceOrder","post","then","response","data","catch","error","children","fileName","_jsxFileName","lineNumber","columnNumber","className","pizza","name","quantity","cost","onClick","disabled","style","color","borderColor","_c","$RefreshReg$"],"sources":["E:/Downloads/frontend/src/components/UserHome/PlaceOrder.js"],"sourcesContent":["import React, { useState ,useEffect} from 'react';\nimport axios from 'axios';\nimport { useNavigate,useHistory } from 'react-router-dom';\n\n\nfunction PlaceOrder({ cartItems }) {\n  const [isPlacingOrder, setIsPlacingOrder] = useState(false);\n  const navigate=useNavigate();\n  const history=useNavigate();\n  const cartIds=cartItems.map((cart) => cart.cartId)\n  // let nocart;\n  // if(cartItems.length===0)\n  const [orderId,setOrderId]=useState();\n  useEffect(() => {\n\n    const stopBack = () => {\n\n      window.history.pushState(null, null, window.location.href);\n\n      window.onpopstate = function (event) {\n\n        window.history.go(1);\n\n      };\n\n    };\n\n    stopBack();\n\n  }, []);\n\n  const handleCancelOrder =async ()=>{\n      const res=await axios.get(`http://localhost:8080/pizza/app/home/cancel-order/${orderId}`);\n      console.log(res);\n      // alert('vcd removed from cart')\n      navigate('/userHome/cart');\n  \n    // /home/cancel-order/{orderId}\n\n  }\n  \n  const handlePlaceOrder = () => {\n    setIsPlacingOrder(true);\n    axios\n      .post(`http://localhost:8080/pizza/app/home/place-order`, {\n        cartIds\n      })\n      .then((response) => {\n\n        setOrderId(response.data)\n\n        console.log('Order placed successfully!', response.data);\n        setIsPlacingOrder(true);\n       navigate(`/userHome/payment/${response.data}`); \n      })\n      .catch((error) => {\n        if(error==\"AxiosError: Network Error\")\n          navigate('/serverError');\n        else{\n        console.error('Error placing the order:', error);\n        setIsPlacingOrder(false);\n        }\n      });\n  };\n  return (\n    <div>\n      <h2>Place Your Order</h2>\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>PIZZA Name</th>\n            <th>Quantity</th>\n            <th>Cost</th>\n          </tr>\n        </thead>\n        <tbody>\n          {cartItems.map((cart) => (\n            <tr key={cart.cartId}>\n              <td>{cart.pizza.name}</td>\n              <td>{cart.pizza.quantity}</td>\n              <td>{cart.pizza.cost}</td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n      <button\n        onClick={handlePlaceOrder}\n        disabled={isPlacingOrder}\n        style={{color:\"#8a1253\",borderColor:\"#8a1253\"}}\n        className=\"btn btn-light\">\n        {isPlacingOrder ? 'Placing order..' : 'Confirm Order'}\n      </button>\n      <button  style={{color:\"#8a1253\",borderColor:\"#8a1253\"}} onClick={handleCancelOrder} className=\"btn btn-light\">\n\n       Cancel Order\n\n       </button>\n   \n       </div>\n  );\n}\n\nexport default PlaceOrder;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}